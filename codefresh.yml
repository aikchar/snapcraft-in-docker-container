version: '1.0'
steps:
    build_image:
        title: Building Docker Image
        type: build
        image_name: codeghar/snapcraft
        working_directory: ./
        dockerfile: Dockerfile
        tag: '${{CF_BRANCH_TAG_NORMALIZED}}'
    push_to_registry:
        title: Pushing to Docker Registry (with credentials)
        type: push
        candidate: '${{build_image}}'
        tag: '${{CF_BRANCH_TAG_NORMALIZED}}'
        credentials:
            #make sure that you have a dockerUsername and dockerPassword define on the pipeline.
            username: '${{dockerUsername}}'
            password: '${{dockerPassword}}'
